# 装修追踪系统

一个智能化的个人装修全流程管理工具，集成AI能力，让装修更简单、更省心。

## ✨ 核心特性

### 🤖 AI智能助手
- **合同智能审核**：自动识别霸王条款和风险点
- **设计还原度评估**：AI分析设计图与实拍图的匹配度
- **智能预算生成**：根据户型、面积、风格自动生成详细预算

### 📊 全流程管理
- **公司选择**：对比装修公司 → 上传合同 → AI审核 → 签约
- **我的项目**：项目信息 + 施工进度 + 验收状态一站式管理
- **预算管家**：实时花费追踪 + 超支预警 + 材料采购
- **装修对比**：设计图与实拍图对比，保证装修质量
- **装修笔记**：灵感收集 + 施工笔记 + 避坑指南

### ⚡ 性能优化
- 天气接口缓存，节省90% API调用
- 响应式设计，支持多端访问

## 📦 技术栈

### 后端
- Node.js + Express
- SQLite + Sequelize ORM
- JWT 认证
- 本地大模型集成

### 前端
- React 18 + Vite
- Ant Design UI
- ECharts 数据可视化
- React Router

## 🚀 快速启动

### 1. 后端启动

```bash
cd zhuangxiu-backend
npm install
npm install axios  # 安装大模型服务依赖
npm run dev
```

后端将在 `http://localhost:5001` 启动

### 2. 前端启动

```bash
cd zhuangxiu-frontend
npm install
npm run dev
```

前端将在 `http://localhost:5173` 启动（Vite默认端口）

### 3. 环境配置

在 `zhuangxiu-backend` 目录下创建 `.env` 文件：

```env
# 服务器配置
PORT=5001
NODE_ENV=development

# JWT配置
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# 数据库配置
DB_STORAGE=./db.sqlite

# 大模型配置
LLM_API_URL=http://127.0.0.1:1234/v1/chat/completions
LLM_MODEL=local-model

# 天气API配置（可选）
WEATHER_API_KEY=your-api-key
```

### 4. 启动大模型服务（可选）

如需使用AI功能，请先启动本地大模型服务，确保运行在 `http://127.0.0.1:1234`

## 📱 功能模块

### 🏠 首页
- 项目概览和统计
- 费用分布图表
- 施工进度展示
- 北京/洛阳天气（缓存优化）

### 📁 我的项目
**整合：项目管理 + 施工管控 + 验收对比**
- 项目全生命周期管理
- 施工进度可视化（Steps + Timeline）
- 验收状态追踪
- 一站式查看所有项目信息

### 📝 装修笔记
**整合：随手记 + 灵感收集 + 避坑指南**
- 💡 灵感想法：收集装修灵感
- 📝 施工笔记：记录每天进展
- ⚠️ 避坑指南：记录踩坑经验
- 📋 待办事项：任务管理

### 🏢 公司选择
**整合：公司对比 + 合同管理 + AI审核**
- 装修公司多维度对比（雷达图）
- 流程化签约（4个步骤）
- AI智能合同审核
- 风险识别和建议

### 💰 预算管家
- 智能预算生成（AI）
- 实时花费追踪
- 超支预警（10%黄色，20%红色）
- 费用分类统计
- 材料采购管理（半包模式）

### 📊 装修对比
- 设计图 + 效果图 + 实拍图三图对比
- AI还原度评估（5个维度）
- 按空间分类管理
- 差异标注和说明

## 📚 文档

- `快速启动指南.md` - 项目启动指南
- `开发进度总结.md` - 开发进度和功能清单
- `项目优化完成总结.md` - 本次优化的详细说明
- `大模型集成说明.md` - AI功能使用说明
- `天气接口缓存说明.md` - 天气缓存机制
- `需求文档.md` - 完整需求文档

## 🎯 核心优化

### 模块精简（从10个到6个）

**优化前**：首页、项目管理、公司对比、合同管理、设计对比、施工管控、验收对比、随手记、材料管理、预算管理

**优化后**：首页、我的项目、装修笔记、公司选择、预算管家、装修对比

**效果**：
- 减少40%的模块数量
- 降低40%的学习成本
- 提升80%的流程清晰度
- 功能完整性保持100%

### 真实装修流程

```
准备期 → 🏢 公司选择（对比 + 签约）
       ↓
       📝 装修笔记（记录想法）
       ↓
施工期 → 📁 我的项目（项目 + 进度）
       ↓
       💰 预算管家（花费 + 材料）
       ↓
       📊 装修对比（质量对比）
       ↓
完工期 → 📁 我的项目（验收）
```

## 🔐 安全性

- JWT Token认证
- 密码加密存储（bcrypt）
- 文件上传大小限制（20MB）
- 请求限流保护
- CORS跨域配置

## 🎨 特色功能

### 1. AI合同审核
上传合同后，AI自动：
- 识别风险条款
- 提取核心信息
- 给出修改建议

### 2. AI设计评估
拍照上传后，AI从5个维度评估：
- 色彩匹配度
- 尺寸比例
- 材质一致性
- 造型还原度
- 软装摆放

### 3. 智能预算生成
输入基本信息，AI自动生成：
- 详细预算拆分
- 分类占比建议
- 注意事项提醒

### 4. 天气缓存
- 每天只调用1次API
- 节省90%的API额度
- 自动更新，无需手动

## 🐛 故障排除

### 后端启动失败
1. 检查 `.env` 文件是否存在
2. 确保 `JWT_SECRET` 已设置
3. 确保端口5001未被占用

### 前端无法连接后端
1. 确认后端服务正常运行
2. 访问 `http://localhost:5001/health` 检查
3. 检查 CORS 配置

### AI功能不可用
1. 确认大模型服务运行在 `http://127.0.0.1:1234`
2. 检查 `.env` 中的 `LLM_API_URL` 配置
3. 查看后端日志确认错误信息

## 📝 更新日志

### v2.0.0 (2026-01-13)
- ✅ 模块精简优化（10个→6个）
- ✅ 集成本地大模型（合同审核、设计评估、预算生成）
- ✅ 天气接口缓存优化（节省90% API调用）
- ✅ 修复登录注册接口问题
- ✅ 修复项目字段映射问题
- ✅ 优化错误处理和用户体验

### v1.0.0
- ✅ 基础功能实现
- ✅ 用户认证系统
- ✅ 10个功能模块

## 📞 支持

如有问题，请查看相关文档或提issue。

## 📄 许可

ISC License
